<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>        
        <meta name="description" content=""></meta>
        <meta name="author" content=""></meta>
        <meta charset="UTF-8"></meta>
        <ui:insert name="title"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
        <link rel="stylesheet" href="resources/css/bootstrap.min.css"></link>
        <link rel="stylesheet" href="resources/css/styleHome.css"></link>
        <link rel="stylesheet" href="resources/css/tooltips.css"></link>
        <link rel="stylesheet" href="resources/css/styleAccordion.css"></link>        
        <link href="resources/css/font-awesome.min.css" rel="stylesheet"></link>
        <link href="resources/css/animate.min.css" rel="stylesheet"></link>
        <link href="resources/css/owl.carousel.css" rel="stylesheet"></link>
        <link href="resources/css/owl.transitions.css" rel="stylesheet"></link>
        <link href="resources/css/prettyPhoto.css" rel="stylesheet"></link>
        <link href="resources/css/main.css" rel="stylesheet"></link>
        <link href="resources/css/hamburguer.css" rel="stylesheet"></link>
        <link rel = "shortcut icon" href="resources/icons/iconoEPIONE.png" type="image/x-icon"></link>
        <ui:insert name="head"/>
        <ui:insert name="script_head"/>
    </h:head>

    <h:body>
        <!--<p:importConstants type="org.ipshorisoes.constants.Constants" var="pages" />-->
        <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
        <p:dialog style=" opacity: 20%; border: none; background: transparent; box-shadow: none"  widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">            
            <p:graphicImage width="100" id="loadImages" value="/resources/images/loading.gif"/>
        </p:dialog>

        <c:if test="#{!loginBean.validateSessionActive()}" >
            <script type="text/javascript">
                window.location = "index.html";
            </script>
        </c:if>
        
        <ui:insert name="validatePermit"/>
        
        <p:idleMonitor timeout="1200000" onidle="PF('dlg').show()" />
        <p:idleMonitor timeout="1000" onidle="${loginBean.validateTimerSessionActive()}"/>
        <p:dialog header="Control de sesión" widgetVar="dlg" modal="true" resizable="false" responsive="true" closable="false" draggable="false">
            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-12">
                <h:outputLabel value="La sesión ha caducado, por favor, inicie sesión de nuevo!" />                
                <f:facet name="footer">
                    <h:form>
                        <p:commandLink action="#{loginBean.logout}">                        
                            <p:commandButton title="Aceptar" class="btn text-center col-md-offset-5"/>
                        </p:commandLink>
                    </h:form>
                </f:facet>  
            </p:panelGrid>
        </p:dialog>

        <div class="container-fluid">
            <ui:include src="../banner1.xhtml"/>
            <div class="row col-sm-12 row col-md-12 col-lg-12">                
                <div id="top" class="top">
                    <ui:insert name="menu_epione"/>
                    <!--el area del menu -->
                </div>                  
            </div>
            <div class="row">    
                <h:form id="bread">
                    <ol class="breadcrumb">
                        <li><p:commandLink value="Epione" action="home?faces-redirect=true" style="text-decoration: none"/></li>
                        <ui:insert name="breadcrumb"/>
                    </ol>  
                </h:form>
            </div>
            <h:form id="tmp_rep_graph">  
                <div class="row">
                    <p:panel  style=" border: none; background: transparent; padding: 0; margin: 0">                            
                        <div class="col-lg-6 col-lg-offset-3">
                            <p:outputLabel style="text-align: center; width: 100%" value="Seleccione el reporte a generar :" for="selectReport"/>
                            <h:selectOneMenu id="selectReport" value="#{reportGraphicBean.dto.typeReport}" styleClass="displayOpcion" class="form-control">
                                <f:selectItem itemLabel="Seleccione" itemValue="0"/>
                                <f:selectItems value="#{reportGraphicBean.dto.listReports}" var="item" itemLabel="#{item.name_report}" itemValue="#{item.id_report}"/>
                                <p:ajax  update="tmp_rep_graph" listener="#{reportGraphicBean.loadFieldsReport()}"/>
                            </h:selectOneMenu>
                        </div>
                    </p:panel>
                </div>
                <div class="row" style="margin-top: 20px;">
                    <ui:insert name="content"/>
                </div>
            </h:form>
        </div>

        <script type="text/javascript" src="resources/js/hamburguer.js" language="javascript"></script>
        <script type="text/javascript" src="resources/js/bootstrap.min.js" language="javascript"></script>
        <script type="text/javascript" src="resources/js/loader.js"></script>
        <ui:insert name="javascript_final"/>
    </h:body>
</html>
