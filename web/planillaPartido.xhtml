<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body id="idBody">
        <f:event type="preRenderView" listener="#{partidoBean.listarPlanillasInicio()}" />
        <p:dialog modal="true" widgetVar="statusDialogPlanilla" header="Cargando..." draggable="false" closable="false" resizable="false">
            <p:graphicImage value="/resources/imagen/gol_celeste.gif"  width="180" height="180"/>
        </p:dialog>
        <script type="text/javascript">
            function start() {
                PF('statusDialogPlanilla').show();
            }
            function stop() {
                PF('statusDialogPlanilla').hide();
            }
        </script>
        
        <h:form id="frmMarcador">
            <h:panelGrid columns="2" id="panel">
            <p:dataTable id="dataGolesA" value="#{partidoBean.listaGolesA}" var="golesA" >         
                <p:column headerText="Goles Equipo A: #{partidoBean.partido.equipoA.nombreEquipo} #{partidoBean.listaGolesA.size()}">
                    <p:outputLabel value="#{golesA.jugador.nombreJugador}"/>
                </p:column>               
            </p:dataTable>
            
            <p:dataTable id="dataGolesB" value="#{partidoBean.listaGolesB}" var="golesB" >                
                <p:column headerText="Goles Equipo B: #{partidoBean.partido.equipoB.nombreEquipo} #{partidoBean.listaGolesB.size()}">
                    <p:outputLabel value="#{golesB.jugador.nombreJugador}"/>
                </p:column>               
            </p:dataTable>  
            </h:panelGrid>
            
           
        </h:form>  
        
        <h:panelGrid  id="panelGridPlanilla" columns="2">
        <h:form id="frm1">
            
            <p:outputLabel value="Equipo A: #{partidoBean.partido.equipoA.nombreEquipo}"/>
            <p:dataTable id="data" value="#{partidoBean.listaJugadoresA}" var="jugadorA" >
                <p:column headerText="No" width="9%">
                    <p:inputText />
                </p:column>
                <p:column headerText="Jugador">
                    <p:outputLabel value="#{jugadorA.nombreJugador}"/>
                </p:column>
                <p:column headerText="Gol">
                    <p:commandButton  id="btnGolA" value="Gol +" update="frmMarcador:panel" actionListener="#{partidoBean.anotarGol(jugadorA, partidoBean.partido.equipoA, partidoBean.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      />
                    
                </p:column>
                <p:column headerText="Ama">
                    
                </p:column>
              
           
                
            </p:dataTable>
            
            
        </h:form>
              
        
        
        <h:form id="frm2">
            
                
            <p:outputLabel value="Equipo B: #{partidoBean.partido.equipoB.nombreEquipo}"/>
            <p:dataTable id="data" value="#{partidoBean.listaJugadoresB}" var="jugadorB" >
                <p:column headerText="No">
                    <p:inputText />
                </p:column>
                <p:column headerText="Jugador">
                    <p:outputLabel value="#{jugadorB.nombreJugador}"/>
                </p:column>
                <p:column headerText="Gol">
                    <p:commandButton value="Gol +" id="btnGolB" update="frmMarcador:panel"  actionListener="#{partidoBean.anotarGol(jugadorB, partidoBean.partido.equipoB, partidoBean.partido)}"
                                     ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" 
                                     />
                    
                </p:column>
                <p:column headerText="Ama">
                    
                </p:column>
                
            </p:dataTable>           
        </h:form>
      </h:panelGrid>
        <h:form>
            <p:commandButton value="Finalizar Partido" action="#{partidoBean.finalizarPartido()}"
                                      onclick="PrimeFaces.monitorDownload(start, stop);"
                                     />
        </h:form>
    </h:body>
</html>

