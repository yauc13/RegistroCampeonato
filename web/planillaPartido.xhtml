<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body id="idBody">
        <ui:composition template="./WEB-INF/template/plantilla.xhtml">
            <ui:define name="content">
<p:growl autoUpdate="true" showDetail="true"/>
        <f:event type="preRenderView" listener="#{planillaPartidoBean.listarPlanillasInicio()}" />
        <p:dialog modal="true" widgetVar="statusDialogPlanilla" header="Cargando..." draggable="false" closable="false" resizable="false">
            <p:graphicImage value="/resources/imagen/gol_celeste.gif"  width="180" height="180"/>
        </p:dialog>
        <script type="text/javascript">
            function start() {
                PF('statusDialogPlanilla').show();
            }
            function stop() {
                PF('statusDialogPlanilla').hide();
            }
        </script>
        
           <div id="miga">
                    <h:form>
                        <p:breadCrumb> 
                            <p:menuitem value="Campeonatos" url="listaCampeonato?faces-redirect=true" />     
                            <p:menuitem value="#{adminChampionShipBean.campeonato.nombreCampeonato}"  action="#{campeonatoBean.verGruposCampeonato(adminChampionShipBean.campeonato)}"/> 
                            
                        </p:breadCrumb>
                    </h:form>
                </div>

                <br/>
        <h:form>
            <p:commandButton value="Iniciar Partido" action="#{planillaPartidoBean.iniciarPartido()}"  disabled="#{planillaPartidoBean.dto.enaBtnIniciar}"
                             ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                     />
        </h:form>
        <h:form id="frmMarcador">
            <h:panelGrid columns="2" id="panel">
            <p:dataTable id="dataGolesA" value="#{planillaPartidoBean.dto.listaGolesA}" var="golesA" >         
                <p:column headerText="Goles Equipo A: #{planillaPartidoBean.dto.partido.equipoA.nombreEquipo} #{planillaPartidoBean.dto.listaGolesA.size()}">
                    <p:outputLabel value="#{golesA.jugador.nombreJugador}"/>
                </p:column>               
            </p:dataTable>
            
            <p:dataTable id="dataGolesB" value="#{planillaPartidoBean.dto.listaGolesB}" var="golesB" >                
                <p:column headerText="Goles Equipo B: #{planillaPartidoBean.dto.partido.equipoB.nombreEquipo} #{planillaPartidoBean.dto.listaGolesB.size()}">
                    <p:outputLabel value="#{golesB.jugador.nombreJugador}"/>
                </p:column>               
            </p:dataTable>  
            </h:panelGrid>
            
           
        </h:form>  
        
        <h:panelGrid  id="panelGridPlanilla" columns="2">
        <h:form id="frm1">
            
            <p:outputLabel value="Equipo A: #{planillaPartidoBean.dto.partido.equipoA.nombreEquipo}"/>
            <p:dataTable id="data" value="#{planillaPartidoBean.dto.listaJugadoresA}" var="jugadorA" >
                <p:column headerText="No" width="9%">
                    <p:inputText />
                </p:column>
                <p:column headerText="Jugador">
                    <p:outputLabel value="#{jugadorA.nombreJugador}"/>
                </p:column>
                <p:column headerText="Gol">
                    <p:commandButton  id="btnGolA" value="Gol +" update="frmMarcador:panel" actionListener="#{planillaPartidoBean.anotarGol(jugadorA.idJugador, planillaPartidoBean.dto.partido.idEquipoA, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtngol}"
                                      />
                    
                </p:column>
                <p:column headerText="Tarjetas">
                    <p:commandButton  id="btnTarAma" value="Ama" update="frmMarcador:panel" 
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('AMA', jugadorA.idJugador, planillaPartidoBean.dto.partido.idEquipoA, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      />
                
               
                    <p:commandButton  id="btnTarAzu" value="Azu" update="frmMarcador:panel" 
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('AZU', jugadorA.idJugador, planillaPartidoBean.dto.partido.idEquipoA, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      />
                
               
                    <p:commandButton  id="btnTarRoj" value="Roj" update="frmMarcador:panel"
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('ROJ', jugadorA.idJugador, planillaPartidoBean.dto.partido.idEquipoA, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      />
                </p:column>
              
           
                
            </p:dataTable>
            
            
        </h:form>
              
        
        
        <h:form id="frm2">
            
                
            <p:outputLabel value="Equipo B: #{planillaPartidoBean.dto.partido.equipoB.nombreEquipo}"/>
            <p:dataTable id="data" value="#{planillaPartidoBean.dto.listaJugadoresB}" var="jugadorB" >
                <p:column headerText="No">
                    <p:inputText />
                </p:column>
                <p:column headerText="Jugador">
                    <p:outputLabel value="#{jugadorB.nombreJugador}"/>
                </p:column>
                <p:column headerText="Gol">
                    <p:commandButton value="Gol +" id="btnGolB" update="frmMarcador:panel"  actionListener="#{planillaPartidoBean.anotarGol(jugadorB.idJugador, planillaPartidoBean.dto.partido.idEquipoB , planillaPartidoBean.dto.partido)}"
                                     ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" 
                                     disabled="#{planillaPartidoBean.dto.enaBtngol}"
                                     />
                    
                </p:column>
                 <p:column headerText="Tarjetas">
                    <p:commandButton  id="btnTarAma" value="Ama" update="frmMarcador:panel" 
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('AMA', jugadorB.idJugador, planillaPartidoBean.dto.partido.idEquipoB, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      />
                
               
                    <p:commandButton  id="btnTarAzu" value="Azu" update="frmMarcador:panel" 
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('AZU', jugadorB.idJugador, planillaPartidoBean.dto.partido.idEquipoB, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      />
                
               
                    <p:commandButton  id="btnTarRoj" value="Roj" update="frmMarcador:panel"
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('ROJ', jugadorB.idJugador, planillaPartidoBean.dto.partido.idEquipoB, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      />
                </p:column>
                
            </p:dataTable>           
        </h:form>
      </h:panelGrid>
        <h:form>
            <p:commandButton value="Finalizar Partido" action="#{planillaPartidoBean.finalizarPartido()}"
                             disabled="#{planillaPartidoBean.dto.enaBtnFin}"
                                      onclick="PrimeFaces.monitorDownload(start, stop);"
                                     />
        </h:form>
        
         </ui:define>           
        </ui:composition>
    </h:body>
</html>

