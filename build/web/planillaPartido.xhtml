<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body id="idBody">
        <ui:composition template="./WEB-INF/template/plantilla.xhtml">
            <ui:define name="content">
        <p:growl autoUpdate="true" showDetail="true"/>
        <f:event type="preRenderView" listener="#{planillaPartidoBean.listarPlanillasInicio()}" />
        <p:dialog modal="true" widgetVar="statusDialogPlanilla" header="Cargando..." draggable="false" closable="false" resizable="false">
            <p:graphicImage value="/resources/imagen/gol_celeste.gif"  width="180" height="180"/>
        </p:dialog>
        <script type="text/javascript">
            function start() {
                PF('statusDialogPlanilla').show();
            }
            function stop() {
                PF('statusDialogPlanilla').hide();
            }
        </script>
        
           <div id="miga">
                    <h:form>
                        <p:breadCrumb> 
                            <p:menuitem value="Campeonatos" url="listaCampeonato?faces-redirect=true" />     
                            <p:menuitem value="#{adminChampionShipBean.dto.campeonato.nombreCampeonato}"  action="#{campeonatoBean.verGruposCampeonato(adminChampionShipBean.dto.campeonato)}"/> 
                            <p:menuitem value="#{adminChampionShipBean.grupo.nombreGrupo}"  action="#{adminChampionShipBean.verGrupo(grupo)}"/>
                        </p:breadCrumb>
                    </h:form>
                </div>

                <br/>
        <h:form>
            <p:commandButton value="Iniciar Partido" action="#{planillaPartidoBean.iniciarPartido()}"  disabled="#{planillaPartidoBean.dto.enaBtnIniciar}"
                             ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                     />
        </h:form>
        <h:form id="frmMarcador">
            <h:panelGrid columns="2" id="panel">
            <p:dataTable id="dataGolesA" value="#{planillaPartidoBean.dto.listaGolesA}" var="golesA" >         
                <p:column headerText="Goles Equipo A: #{planillaPartidoBean.dto.partido.equipoA.nombreEquipo} #{planillaPartidoBean.dto.listaGolesA.size()}">
                    <p:outputLabel value="#{golesA.jugador.nombreJugador}"/>
                </p:column>               
            </p:dataTable>
            
            <p:dataTable id="dataGolesB" value="#{planillaPartidoBean.dto.listaGolesB}" var="golesB" >                
                <p:column headerText="Goles Equipo B: #{planillaPartidoBean.dto.partido.equipoB.nombreEquipo} #{planillaPartidoBean.dto.listaGolesB.size()}">
                    <p:outputLabel value="#{golesB.jugador.nombreJugador}"/>
                </p:column>               
            </p:dataTable>  
            </h:panelGrid> 
            <p:outputLabel value="Arbitro" for="oneArb"/>                                               
            <p:selectOneMenu id="oneArb" value="#{planillaPartidoBean.dto.idArbitro}">                           
                <f:selectItem itemLabel="--Seleccione--" itemValue="#{null}"/>
                 <f:selectItems value="#{planillaPartidoBean.dto.listaArbitros}" var="item" 
                                itemValue="#{item.idArbitro}" itemLabel="#{item.nombreArbitro}"/>                                                       
            </p:selectOneMenu>
        </h:form>  
        
        <h:panelGrid  id="panelGridPlanilla" columns="2">
        <h:form id="frm1">            
            <p:outputLabel value="Equipo A: #{planillaPartidoBean.dto.partido.equipoA.nombreEquipo}"/>
            <p:dataTable id="data" value="#{planillaPartidoBean.dto.listaJugadoresA}" var="jugadorA" >
                <p:column headerText="No" width="9%">
                    <p:inputText />
                </p:column>
                <p:column headerText="Jugador">
                    <p:outputLabel value="#{jugadorA.nombreJugador}"/>
                </p:column>
                <p:column headerText="Gol" width="17%">
                    <p:commandButton  id="btnGolA" value="Gol" update="frmMarcador:panel"
                                      actionListener="#{planillaPartidoBean.anotarGol(jugadorA.idJugador, planillaPartidoBean.dto.partido.idEquipoA, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtngol}"
                                      icon="ui-icon-circle-plus"
                                      />
                    
                </p:column>
                <p:column headerText="Tarjetas" width="25%" >
                    <p:commandButton  id="btnTarAma" update="frmMarcador:panel" 
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('AMA', jugadorA.idJugador, planillaPartidoBean.dto.partido.idEquipoA, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      style="background:#c69500;"
                                      icon="ui-icon-note"
                                      />
                
               
                    <p:commandButton  id="btnTarAzu" update="frmMarcador:panel" 
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('AZU', jugadorA.idJugador, planillaPartidoBean.dto.partido.idEquipoA, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      style="background:#002752;"
                                      icon="ui-icon-note"
                                      />
                
               
                    <p:commandButton  id="btnTarRoj" update="frmMarcador:panel"
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('ROJ', jugadorA.idJugador, planillaPartidoBean.dto.partido.idEquipoA, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      style="background:#FF0000;"
                                      icon="ui-icon-note"
                                      
                                      />
                </p:column>                                         
            </p:dataTable>                        
        </h:form>
              
        
        
        <h:form id="frm2">                            
            <p:outputLabel value="Equipo B: #{planillaPartidoBean.dto.partido.equipoB.nombreEquipo}"/>
            <p:dataTable id="data" value="#{planillaPartidoBean.dto.listaJugadoresB}" var="jugadorB" >
                <p:column headerText="No" width="9%">
                    <p:inputText />
                </p:column>
                <p:column headerText="Jugador">
                    <p:outputLabel value="#{jugadorB.nombreJugador}"/>
                </p:column>
                <p:column headerText="Gol" width="17%">
                    <p:commandButton value="Gol" id="btnGolB" update="frmMarcador:panel"  actionListener="#{planillaPartidoBean.anotarGol(jugadorB.idJugador, planillaPartidoBean.dto.partido.idEquipoB , planillaPartidoBean.dto.partido)}"
                                     ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" 
                                     disabled="#{planillaPartidoBean.dto.enaBtngol}"
                                     icon="ui-icon-circle-plus"
                                     />
                    
                </p:column>
                 <p:column headerText="Tarjetas" width="25%">
                    <p:commandButton  id="btnTarAma"  update="frmMarcador:panel" 
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('AMA', jugadorB.idJugador, planillaPartidoBean.dto.partido.idEquipoB, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      icon="ui-icon-note"
                                      style="background:#c69500;"
                                      />
                
               
                    <p:commandButton  id="btnTarAzu"  update="frmMarcador:panel" 
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('AZU', jugadorB.idJugador, planillaPartidoBean.dto.partido.idEquipoB, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      style="background:#002752;"
                                      icon="ui-icon-note"
                                      />
                
               
                    <p:commandButton  id="btnTarRoj"  update="frmMarcador:panel"
                                      actionListener="#{planillaPartidoBean.anotarTarjeta('ROJ', jugadorB.idJugador, planillaPartidoBean.dto.partido.idEquipoB, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnTar}"
                                      icon="ui-icon-note"
                                      style="background:#FF0000;"
                                      />
                </p:column>
                
            </p:dataTable>           
        </h:form>
      </h:panelGrid>
        <h:form>
            <p:commandButton value="Finalizar Partido" action="#{planillaPartidoBean.finalizarPartido()}"
                             disabled="#{planillaPartidoBean.dto.enaBtnFin}"
                             ajax="false"
                             onclick="PrimeFaces.monitorDownload(start, stop);"
                                     />
        </h:form>
                <h:panelGrid  id="panelGridPenalties"  rendered="#{planillaPartidoBean.dto.renPanelPenal}" >
                    <h:form id="frmPenal" >
                    <p:outputLabel value="Penaltis"/>
                    <p:panelGrid columns="3">
                    <p:outputLabel value="Equipo A: #{planillaPartidoBean.dto.partido.equipoA.nombreEquipo}"/>
                    <p:commandButton  id="btnPenA" value="Gol" update="frmPenal"
                                      actionListener="#{planillaPartidoBean.anotarPenal(0, planillaPartidoBean.dto.partido.idEquipoA, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnPenal}"
                                      icon="ui-icon-circle-plus"
                                      />
                    <p:outputLabel value="#{planillaPartidoBean.dto.listaPenalesA.size()}"/>
                    
                    <p:outputLabel value="Equipo B: #{planillaPartidoBean.dto.partido.equipoB.nombreEquipo}"/>
                    <p:commandButton  id="btnPenB" value="Gol" update="frmPenal"
                                      actionListener="#{planillaPartidoBean.anotarPenal(0, planillaPartidoBean.dto.partido.idEquipoB, planillaPartidoBean.dto.partido)}" 
                                      ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);"
                                      disabled="#{planillaPartidoBean.dto.enaBtnPenal}"
                                      icon="ui-icon-circle-plus"
                                      />
                    <p:outputLabel value="#{planillaPartidoBean.dto.listaPenalesB.size()}"/>
                    </p:panelGrid>
                    <p:commandButton value="Finalizar Penaltis" action="#{planillaPartidoBean.finalizarPenalties()}"
                                     disabled="#{planillaPartidoBean.dto.enaBtnPenal}"
                                     onclick="PrimeFaces.monitorDownload(start, stop);"
                                     />
                </h:form>
                </h:panelGrid>
             
        
         </ui:define>           
        </ui:composition>
    </h:body>
</html>

